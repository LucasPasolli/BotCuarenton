!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Translator=e()}(this,(function(){"use strict";function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function e(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}function r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}return function(){function t(e,r){var n=r.bbCodeParser,i=void 0===n?void 0:n,o=r.locale,a=void 0===o?"en-GB":o,s=r.localeArea,l=void 0===s?"en-GB":s,u=r.localeDefault,c=void 0===u?"en-GB":u,f=r.regexpParameters,h=void 0===f?/\\?\[([^\[\]]+)\]/g:f,d=r.regexpTranslations,v=void 0===d?/[\\\$]?\{([^{}]+)\}/g:d;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.translations={},this.bbCodeParser=i,this.locale=a,this.localeArea=l,this.localeDefault=c,this.regexpParameters=h,this.regexpTranslations=v,this.setTranslations(e)}return e(t,[{key:"translation",get:function(){return void 0!==this.translations[this.locale]?this.translations[this.locale]:void 0!==this.translations[this.localeArea]?this.translations[this.localeArea]:void 0!==this.translations[this.localeDefault]?this.translations[this.localeDefault]:{}}}]),e(t,[{key:"getValueFromKey",value:function(t,e){var r=t.split("."),n=r.reduce((function(t,e){var r;return null!==(r=t[e])&&void 0!==r?r:void 0}),this.translation);if(void 0===n&&void 0!==this.translations[this.localeArea]&&(n=r.reduce((function(t,e){var r;return null!==(r=t[e])&&void 0!==r?r:void 0}),this.translations[this.localeArea])),void 0===n&&void 0!==this.translations[this.localeDefault]&&(n=r.reduce((function(t,e){var r;return null!==(r=t[e])&&void 0!==r?r:void 0}),this.translations[this.localeDefault])),void 0===n){if(void 0===e)return"{"+t+"}";n=e}return n}},{key:"setBBCodeParser",value:function(t){return this.bbCodeParser=t,this}},{key:"setTranslations",value:function(t){var e=this;return Object.entries(t).forEach((function(t){var o=i(t,2),a=o[0],s=o[1];void 0===e.translations[a]&&(e.translations[a]={}),e.translations[a]=function(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){r(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}({},s)})),this}},{key:"translate",value:function(t,e,r){if(null==t)return t;"{"===t.charAt(0)&&(t=t.slice(1)),"}"===t.charAt(t.length-1)&&(t=t.slice(0,t.length-1));var n=this.getValueFromKey(t,r);return null==n||"string"!=typeof n?n:(e instanceof Object&&(n=Object.keys(e).reduce((function(t,r){return t.replace(new RegExp("\\["+r+"\\]","gi"),e[r])}),n)),void 0===this.bbCodeParser?n:this.bbCodeParser.parse(n))}},{key:"translateInline",value:function(t){var e=this;return t=t.replace(this.regexpTranslations,(function(t,r){switch(t.charAt(0)){case"\\":return t.slice(1);case"$":return t}return e.translate(r,void 0,t)}))}}]),t}()}));//# sourceMappingURL=translator.min.js.map
