export default class{get translation(){return void 0!==this.translations[this.locale]?this.translations[this.locale]:void 0!==this.translations[this.localeArea]?this.translations[this.localeArea]:void 0!==this.translations[this.localeDefault]?this.translations[this.localeDefault]:{}}constructor(t,{bbCodeParser:e,locale:s="en-GB",localeArea:a="en-GB",localeDefault:r="en-GB",regexpParameters:i=/\\?\[([^\[\]]+)\]/g,regexpTranslations:l=/[\\\$]?\{([^{}]+)\}/g}){this.translations={},this.bbCodeParser=e,this.locale=s,this.localeArea=a,this.localeDefault=r,this.regexpParameters=i,this.regexpTranslations=l,this.setTranslations(t)}getValueFromKey(t,e){const s=t.split(".");let a=s.reduce((t,e)=>t[e]??void 0,this.translation);if(void 0===a&&void 0!==this.translations[this.localeArea]&&(a=s.reduce((t,e)=>t[e]??void 0,this.translations[this.localeArea])),void 0===a&&void 0!==this.translations[this.localeDefault]&&(a=s.reduce((t,e)=>t[e]??void 0,this.translations[this.localeDefault])),void 0===a){if(void 0===e)return"{"+t+"}";a=e}return a}setBBCodeParser(t){return this.bbCodeParser=t,this}setTranslations(t){return Object.entries(t).forEach(([t,e])=>{void 0===this.translations[t]&&(this.translations[t]={}),this.translations[t]={...e}}),this}translate(t,e,s){if(null==t)return t;"{"===t.charAt(0)&&(t=t.slice(1)),"}"===t.charAt(t.length-1)&&(t=t.slice(0,t.length-1));let a=this.getValueFromKey(t,s);return null==a||"string"!=typeof a?a:(e instanceof Object&&(a=Object.keys(e).reduce((t,s)=>t.replace(new RegExp("\\["+s+"\\]","gi"),e[s]),a)),void 0===this.bbCodeParser?a:this.bbCodeParser.parse(a))}translateInline(t){return t=t.replace(this.regexpTranslations,(t,e)=>{switch(t.charAt(0)){case"\\":return t.slice(1);case"$":return t}return this.translate(e,void 0,t)})}}//# sourceMappingURL=translator.esm.min.js.map
